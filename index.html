<!DOCTYPE html>
<meta charset="UTF-8">
<title>Animation.ready test</title>
<style>
@keyframes anim {
  from { color: red; }
  to { color: blue; }
}
#target {
  width: 100px;
  height: 100px;
  background-color: blue;
}
</style>
<div id="target"></div>
<script>
setTimeout(() => {
  target.style.animation = "anim 1s infinite";
  const anim = target.getAnimations()[0];
  anim.ready.then(() => {
    console.log("ready");
    dump("ready\n");
  });
  requestAnimationFrame(() => {
    console.log("a rAF callback is invoked");
  });
  console.log("a setTimeout callback is invoked");
}, 1000);
</script>
